{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\HAZEM\\\\Desktop\\\\template\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport axios from 'axios';\nimport { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nexport default function AuthUser() {\n  let history = useHistory();\n\n  const getToken = () => {\n    const tokenString = sessionStorage.getItem('token');\n    const userToken = JSON.parse(tokenString);\n    return userToken;\n  };\n\n  const getUser = () => {\n    const userString = sessionStorage.getItem('user');\n    const user_detail = JSON.parse(userString);\n    return user_detail;\n  };\n\n  const _useState = useState(getToken()),\n        _useState2 = _slicedToArray(_useState, 2),\n        token = _useState2[0],\n        setToken = _useState2[1];\n\n  const _useState3 = useState(getUser()),\n        _useState4 = _slicedToArray(_useState3, 2),\n        user = _useState4[0],\n        setUser = _useState4[1];\n\n  const saveToken = (user, token) => {\n    sessionStorage.setItem('token', JSON.stringify(token));\n    sessionStorage.setItem('user', JSON.stringify(user));\n    setToken(token);\n    setUser(user);\n    history.push(\"/dashboard\");\n  };\n\n  const logout = () => {\n    sessionStorage.clear();\n    history.push(\"/login\");\n  };\n\n  const http = axios.create({\n    baseURL: \"http://localhost:8000/api\",\n    headers: {\n      \"Content-type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    }\n  });\n  return {\n    setToken: saveToken,\n    token,\n    user,\n    getToken,\n    http,\n    logout\n  };\n}","map":{"version":3,"sources":["C:/Users/HAZEM/Desktop/template/src/app/Session/AuthUser.js"],"names":["axios","useState","useHistory","AuthUser","history","getToken","tokenString","sessionStorage","getItem","userToken","JSON","parse","getUser","userString","user_detail","token","setToken","user","setUser","saveToken","setItem","stringify","push","logout","clear","http","create","baseURL","headers"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,UAAT,QAA4B,kBAA5B;AAEA,eAAe,SAASC,QAAT,GAAmB;AAC9B,MAAIC,OAAO,GAAGF,UAAU,EAAxB;;AAEA,QAAMG,QAAQ,GAAG,MAAK;AAClB,UAAMC,WAAW,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAApB;AACA,UAAMC,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWL,WAAX,CAAlB;AACA,WAAOG,SAAP;AACH,GAJD;;AAMA,QAAMG,OAAO,GAAG,MAAK;AACjB,UAAMC,UAAU,GAAGN,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAnB;AACA,UAAMM,WAAW,GAAGJ,IAAI,CAACC,KAAL,CAAWE,UAAX,CAApB;AACA,WAAOC,WAAP;AACH,GAJD;;AAT8B,oBAiBLb,QAAQ,CAACI,QAAQ,EAAT,CAjBH;AAAA;AAAA,QAiBvBU,KAjBuB;AAAA,QAiBjBC,QAjBiB;;AAAA,qBAkBPf,QAAQ,CAACW,OAAO,EAAR,CAlBD;AAAA;AAAA,QAkBvBK,IAlBuB;AAAA,QAkBlBC,OAlBkB;;AAoB9B,QAAMC,SAAS,GAAG,CAACF,IAAD,EAAMF,KAAN,KAAe;AAC7BR,IAAAA,cAAc,CAACa,OAAf,CAAuB,OAAvB,EAA+BV,IAAI,CAACW,SAAL,CAAeN,KAAf,CAA/B;AACAR,IAAAA,cAAc,CAACa,OAAf,CAAuB,MAAvB,EAA8BV,IAAI,CAACW,SAAL,CAAeJ,IAAf,CAA9B;AAEAD,IAAAA,QAAQ,CAACD,KAAD,CAAR;AACAG,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAb,IAAAA,OAAO,CAACkB,IAAR,CAAa,YAAb;AACH,GAPD;;AASA,QAAMC,MAAM,GAAG,MAAM;AACjBhB,IAAAA,cAAc,CAACiB,KAAf;AACApB,IAAAA,OAAO,CAACkB,IAAR,CAAa,QAAb;AACH,GAHD;;AAKA,QAAMG,IAAI,GAAGzB,KAAK,CAAC0B,MAAN,CAAa;AACtBC,IAAAA,OAAO,EAAC,2BADc;AAEtBC,IAAAA,OAAO,EAAC;AACJ,sBAAiB,kBADb;AAEJ,uBAAmB,UAASb,KAAM;AAF9B;AAFc,GAAb,CAAb;AAOA,SAAO;AACHC,IAAAA,QAAQ,EAACG,SADN;AAEHJ,IAAAA,KAFG;AAGHE,IAAAA,IAHG;AAIHZ,IAAAA,QAJG;AAKHoB,IAAAA,IALG;AAMHF,IAAAA;AANG,GAAP;AAQH","sourcesContent":["import axios from 'axios';\r\nimport { useState } from 'react';\r\nimport { useHistory  } from 'react-router-dom';\r\n\r\nexport default function AuthUser(){\r\n    let history = useHistory();\r\n\r\n    const getToken = () =>{\r\n        const tokenString = sessionStorage.getItem('token');\r\n        const userToken = JSON.parse(tokenString);\r\n        return userToken;\r\n    }\r\n\r\n    const getUser = () =>{\r\n        const userString = sessionStorage.getItem('user');\r\n        const user_detail = JSON.parse(userString);\r\n        return user_detail;\r\n    }\r\n\r\n\r\n\r\n    const [token,setToken] = useState(getToken());\r\n    const [user,setUser] = useState(getUser());\r\n\r\n    const saveToken = (user,token) =>{\r\n        sessionStorage.setItem('token',JSON.stringify(token));\r\n        sessionStorage.setItem('user',JSON.stringify(user));\r\n\r\n        setToken(token);\r\n        setUser(user);\r\n        history.push(\"/dashboard\");\r\n    }\r\n\r\n    const logout = () => {\r\n        sessionStorage.clear();\r\n        history.push(\"/login\");\r\n    }\r\n\r\n    const http = axios.create({\r\n        baseURL:\"http://localhost:8000/api\",\r\n        headers:{\r\n            \"Content-type\" : \"application/json\",\r\n            \"Authorization\" : `Bearer ${token}`\r\n        }\r\n    });\r\n    return {\r\n        setToken:saveToken,\r\n        token,\r\n        user,\r\n        getToken,\r\n        http,\r\n        logout\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}